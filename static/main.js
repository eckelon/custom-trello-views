!function(t){function i(i){for(var l,o,a=i[0],s=i[1],d=i[2],f=0,c=[];f<a.length;f++)o=a[f],n[o]&&c.push(n[o][0]),n[o]=0;for(l in s)Object.prototype.hasOwnProperty.call(s,l)&&(t[l]=s[l]);for(u&&u(i);c.length;)c.shift()();return r.push.apply(r,d||[]),e()}function e(){for(var t,i=0;i<r.length;i++){for(var e=r[i],l=!0,a=1;a<e.length;a++){var s=e[a];0!==n[s]&&(l=!1)}l&&(r.splice(i--,1),t=o(o.s=e[0]))}return t}var l={},n={0:0},r=[];function o(i){if(l[i])return l[i].exports;var e=l[i]={i:i,l:!1,exports:{}};return t[i].call(e.exports,e,e.exports,o),e.l=!0,e.exports}o.m=t,o.c=l,o.d=function(t,i,e){o.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:e})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,i){if(1&i&&(t=o(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(o.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var l in t)o.d(e,l,function(i){return t[i]}.bind(null,l));return e},o.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(i,"a",i),i},o.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},o.p="/static/";var a=window.webpackJsonp=window.webpackJsonp||[],s=a.push.bind(a);a.push=i,a=a.slice();for(var d=0;d<a.length;d++)i(a[d]);var u=s;r.push([16,2]),e()}({12:function(t,i,e){e(1).tag2("board",'<div id="trello-lists" ref="trelloLists" class="trello-lists"> <div class="trello-lists-item" each="{list in lists}"> <span class="trello-lists-item-title">{list.name}</span> <div class="trello-lists-item-content"> <div class="card-info" each="{card in list.cards}"> <p class="card-info-custom-field" each="{customField in card.customFields}">{customField.name} -> {customField.value}</p> <a href="{card.url}">{card.name}</a> </div> </div> </div> <div show="{board_id==null}"> <input type="text" ref="boardIdValue" placeholder="Board Id"> <button onclick="{update_board_id}">Update Board Id!</button> </div> </div> </div>','board .trello-lists .trello-lists-item,[data-is="board"] .trello-lists .trello-lists-item{ display: inline-block; margin: 20px; width: 300px; vertical-align: top; } board .trello-lists .trello-lists-item .trello-lists-item-title,[data-is="board"] .trello-lists .trello-lists-item .trello-lists-item-title{ font-weight: bold; text-align: center; min-height: 50px; } board .trello-lists .trello-lists-item .trello-lists-item-content,[data-is="board"] .trello-lists .trello-lists-item .trello-lists-item-content{ margin: 12px 0; min-height: 150px; } board .trello-lists .trello-lists-item .trello-lists-item-content .card-info,[data-is="board"] .trello-lists .trello-lists-item .trello-lists-item-content .card-info{ border: 1px solid black; margin: 5px; } board .trello-lists .trello-lists-item .trello-lists-item-content .card-info .card-info-custom-field,[data-is="board"] .trello-lists .trello-lists-item .trello-lists-item-content .card-info .card-info-custom-field{ font-size: 10px; }',"",function(t){this.mixin("board"),this.boardFlow.call(this)})},13:function(t,i,e){e(1).tag2("filter",'<div if="{board_id !=null}" class="funi-filter-info"> <span class="funi-filter-info-current">{selectedFilters} filters are selected</span> </div> <div class="funi-filter" each="{filter in filters}"> <p class="funi-filter-name">{filter.name}:</p> <select class="funi-filter-values" multiple> <option class="{filter.name}" value="0"> No filter </option> <option class="{filter.name}" each="{option in filter.options}" riot-value="{option}"> {option} </option> </select> </div> <button if="{board_id !=null}" ref="applyFilter" onclick="{applyFilter}" id="apply-filter">Apply filter</button>','filter .loading img,[data-is="filter"] .loading img{ width: 50px; display: block; margin: auto; } filter .funi-filter-info .funi-filter-info-current,[data-is="filter"] .funi-filter-info .funi-filter-info-current{ font-weight: bold; color: blue; margin: 0 20px; } filter .funi-filter,[data-is="filter"] .funi-filter{ display: inline-block; } filter .funi-filter .funi-filter-name,[data-is="filter"] .funi-filter .funi-filter-name{ font-size: 12px; font-weight: bold; text-align: center; } filter .funi-filter .funi-filter-values,[data-is="filter"] .funi-filter .funi-filter-values{ height: 250px; margin: 0 25px; min-width: 150px; padding: 10px; }',"",function(t){this.mixin("filter"),this.filterFlow.call(this)})},14:function(t,i,e){e(1).tag2("loading",'<div ref="loadingFilter" id="loading-filter"><img src="/static/svg/spinner.svg"></div>','loading #loading-filter,[data-is="loading"] #loading-filter{ display: none; }',"",function(t){this.mixin("loading"),this.loadingFlow.call(this)})},16:function(t,i,e){"use strict";e.r(i);var l=e(1),n=e.n(l),r=(e(11),e(17)),o=e(9),a={httpRequest:function(t,i){return fetch(t,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)})}},s=new r.a,d=0,u=function(t){(d+=t)<0&&(d=0),1===d&&s.next(!0),0===d&&s.next(!1)},f={loadingSubject:s,startLoading:function(){return u(1)},finishLoading:function(){return u(-1)},loadingFlow:function(){var t=this;this.on("mount",function(){t.loadingSubject.subscribe(function(i){t.refs.loadingFilter.style.display=i?"block":"none"})})}},c=new r.a,p=function(t){var i=[];return void 0===t?i:(Object.entries(t).forEach(function(t){var e={},l=[];t[1].forEach(function(t){var i=[];Object.entries(t._custom_fields).forEach(function(t){i.push({name:t[0],value:t[1]})}),l.push({name:t._name,url:t._url,customFields:i})}),e.name=t[0],e.cards=l,i.push(e)}),i)},h={getCards$:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return o.a.create(function(i){f.startLoading();var e={board_id:window.localStorage.getItem("board-id")};t&&(e.filter_by=t),a.httpRequest("/api/cards",e).then(function(t){return t.json()}).then(function(t){i.next(p(t)),i.complete(),f.finishLoading()}).catch(function(t){f.finishLoading(),i.error(t)})})},boardSubject:c,boardUpdate:function(t){return c.next({type:"update",value:t})},boardDataUpdate:function(t){return c.next({type:"board-data",value:t})},boardFlow:function(){var t=this;this.board_id=localStorage.getItem("board-id"),this.boardSubject.subscribe(function(i){"board-data"===i.type&&t.updateBoard(i.value)}),this.load_cards=function(){null!=t.board_id&&this.getCards$().subscribe(function(i){return t.boardDataUpdate(i)})},this.update_board_id=function(i){i.preventDefault(),this.refs.boardIdValue.value&&0!==this.refs.boardIdValue.value.length&&(window.localStorage.setItem("board-id",this.refs.boardIdValue.value),t.board_id=this.refs.boardIdValue.value,t.update(),t.boardUpdate(this.refs.boardIdValue.value),t.load_cards())},this.updateBoard=function(i){t.lists=i,t.update()},this.on("updated",function(){t.board_id&&this.recalculateBoardWidth()}),this.recalculateBoardWidth=function(){this.refs.trelloLists.style.width=this.refs.trelloLists.getElementsByClassName("trello-lists-item").length*this.calculateElementWidth(this.refs.trelloLists.getElementsByClassName("trello-lists-item")[0])+"px"},this.calculateElementWidth=function(t){if(void 0===t)return 0;var i=t.currentStyle||window.getComputedStyle(t);return t.offsetWidth+(parseFloat(i.marginLeft)+parseFloat(i.marginRight))-(parseFloat(i.paddingLeft)+parseFloat(i.paddingRight))+(parseFloat(i.borderLeftWidth)+parseFloat(i.borderRightWidth))},this.load_cards()}},b={getCustomFields$:o.a.create(function(t){f.startLoading(),a.httpRequest("/api/custom-fields",{board_id:window.localStorage.getItem("board-id")}).then(function(t){return t.json()}).then(function(i){var e=[];Object.entries(i).forEach(function(t){e.push({name:t[0],options:t[1]})}),t.next(e),f.finishLoading(),t.complete()}).catch(function(i){f.finishLoading(),t.error(i)})}),filterFlow:function(){var t=this;this.mixin("loading"),this.mixin("board"),this.board_id=localStorage.getItem("board-id"),this.selectedFilters="No";var i=this;this.on("mount",function(){i.loadingSubject.subscribe(function(t){i.refs.applyFilter.disabled=!!t&&"disabled"})}),this.load_custom_fields=function(){null!=i.board_id&&t.getCustomFields$.subscribe(function(t){i.filters=t,i.update()})},this.applyFilter=function(){var t=[];Array.from(document.getElementsByClassName("funi-filter-values")).filter(function(t){return t.selectedOptions.length>0}).forEach(function(i){return t=t.concat(Array.from(i.selectedOptions))}),this.filter(t)},this.filter=function(t){var e=this,l=[];Array.from(t).filter(function(t){return 0!==t.value}).forEach(function(t){return l.push({name:t.className,value:t.value})}),this.getCards$(l).subscribe(function(t){i.boardDataUpdate(t);var n="";l.forEach(function(t){n+=t.value+" + "}),n=0===n.length?"No":n.slice(0,-1*" + ".length),e.selectedFilters=n,e.update()})},this.boardSubject.subscribe(function(t){"update"===t.type&&(i.board_id=t.value,i.update(),i.load_custom_fields())}),this.load_custom_fields()}};e(12),e(13),e(14);n.a.mixin("loading",f),n.a.mixin("filter",b),n.a.mixin("board",h),n.a.mount("*")}});